<link rel="import" href="../polymer/polymer-element.html">

<dom-module id="colt-x-filter">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <div>
        <template is="dom-repeat" items="[[filters]]" as="filterItem">
            <template is="dom-if" if="{{_isTypeMatching(filterItem, 'text')}}">
							<input type="text"
                value="{{filterItem.Value::change}}"
                placeholder="[[filterItem.label]]"
                data-name="[[filterItem.name]]">
            </template>
            <template is="dom-if" if="{{_isTypeMatching(filterItem, 'multi-select')}}">
							<paper-dropdown-menu
                no-label-float
                no-overlap
                vertical-align="top"
                horizontal-align="left"
                on-iron-select="_handleItemSelect"
                on-iron-deselect="_handleItemDeselect">
								<paper-menu
                  role="menu"
                  slot="dropdown-content"
                  class="dropdown-content"
                  attr-for-selected="name"  multi>
                    <template is="dom-repeat" items="[[filterItem.options]]" as="option">
  										<paper-item name="[[option.name]]">
  												<t-checkbox>[[option.label]]</t-checkbox>
  										</paper-item>
                    </template>
								</paper-menu>                    
							</paper-dropdown-menu>
            </template>
        </template>
        <div class="layout horizontal center filterApply">
            <t-button id="applyfilters"
              label="[[filterButtonLabel]]"
              class="primary"
              on-click="_applyFilters"
              disabled="true">
            </t-button>
        </div>
    </div>
  </template>

  <script>
    /**
     * `colt-x-filter`
     *
     * @customElement
     * @polymer
     * @demo demo/index.html

     */
    class ColtXFilter extends Polymer.Element {
      static get is() { return 'colt-x-filter'; }
      static get properties() {
        return {
					/**
           * [filters description]
           * @type {Array}
           * [{
           *   value: `String` or `Number`
           *   name: `String`
           *   label: `String`
           *   type: `String`
           * }]
           */
          filters: {
            type: Array
          },

          /**
           * Label of the filter button
           * @type {String}
           */
					filterButtonLabel: {
						type: String,
						value: 'Search'
					}
        };
      }

      _applyFilters (params) {
          
      }

      _handleItemSelect () {

      }

      _handleItemDeselect (argument) {
        // body...
      }

      _isTypeMatching (filterItem, type) {
        if (!filterItem || !filterItem.type || !type) {
          return false;
        }
        if (filterItem.type === type) {
          return true;
        }
        return false;
      }
    }

    window.customElements.define(ColtXFilter.is, ColtXFilter);
  </script>
</dom-module>
